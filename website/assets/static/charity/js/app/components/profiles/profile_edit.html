<!DOCTYPE html>
<html lang="en" xmlns:resize="http://www.w3.org/1999/xhtml">
<head>
    <link href="/static/charity/css/profilecss/style.css" rel="stylesheet">
    <link href="/static/charity/css/profilecss/animate.min.css" rel="stylesheet">
</head>
<body>

<!-- aside menu -->
<section>
    <!-- aside menubar -->
    <div id="sidebar">
        <ul class="sidebar-menu">
            <li>
                <a id="descriptionLink" href="#">
                    <i></i>
                    <span>Profile</span>
                </a>
            </li>
            <li class="sub-menu">
                <a href="javascript:;">
                    <i></i>
                    <span>Activity</span>
                    <span class="glyphicon glyphicon-plus act-sidebar"></span>
                </a>
                <ul class="sub">
                    <li class="active"><a id="lastActivityLink" href="#">Last Activity</a></li>
                    <li><a class="" href="profile/{{vm.profile.name}}/activities">Past Activities</a></li>
                    <li ng-show="vm.isMatched"><a class="" href="profile/{{vm.profile.name}}/new_activity">New Activity</a></li>
                </ul>
            </li>
            <li>
                <a id="financialLink" href="#">
                    <i></i>
                    <span>Financial</span>
                </a>
            </li>
            <li>
                <a class="" href="payment/{{vm.profile.name}}">
                    <i></i>
                    <span>Donate To Us</span>
                </a>
            </li>
            <li>
                <a id="contactDetailLink" href="#">
                    <i></i>
                    <span>Contact Us</span>
                </a>
            </li>
            <li ng-show="vm.isMatched">
                <a class="" href="profile/{{vm.profile.name}}/setting">
                    <i></i>
                    <span>Setting</span>
                </a>
            </li>
            <li class="font-medium">
                <div class="no-pointer">
                    <br/>Average Rate : <br/>
                    <div id="stars" class="starrr" style="color: #ffd119;" data-rating='1' ng-model="vm.profile.rate"></div>
                    <br/> {{vm.profile.rate}} Stars from {{vm.profile.total_users}} Users
                </div>
                <div ng-show="vm.user && !vm.isMatched">
                    User Rate : <br/>
                    <div ng-click="vm.rateChange()">
                        <div id="stars-existing" class="starrr" style="color: #ffd119;" data-rating='1' ng-model="vm.profile.userRate"></div>
                        <input type="hidden" id="rateCharity" />
                    </div>
                </div>
            </li><br/><br/>
            <div id="fb-root"></div>
            <div>
                Share us &nbsp;
                <a href="#" ng-click="vm.share()"><img src="/static/charity/images/social-icon.png" /></a>
            </div>
            <div style="text-align: center; padding-top: 85px" ng-show="vm.profile.verified == true">
                <img height="75" width="75" src="/static/charity/images/verified_icon.png" /><br/>
                By UK Commission
            </div>
        </ul>
    </div>
</section>

<div class="mainSection">
    <div class="mainSectionBegin">
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
    </div>

    <!-- Description -->
    <section id="description" class="parallax section">
        <div class="wrapsection">
            <div class="parallax-overlay descriptionBg"></div>
            <div class="container">
                <div class="row">
                    <div class="col-md-12 sol-sm-12">
                        <!-- button console -->
                        <div class="buttonArea" ng-show="vm.isMatched">
                            <!-- edit -->
                            <button type="button" name="editButton" class="btn btn-default btn-sm" onclick="editClick();">
                                <span class="glyphicon glyphicon-pencil"></span>
                            </button>
                            <!-- save -->
                            <button type="button" name="saveButton" class="btn btn-default btn-sm" ng-click="vm.update()" onclick="saveClick()" disabled="true">
                                <span class="glyphicon glyphicon-floppy-disk"></span>
                            </button>
                            <!-- cancel -->
                            <button type="button" name="cancelButton" class="btn btn-default btn-sm" onclick="cancelClick()" disabled="true">
                                <span class="glyphicon glyphicon-remove"></span>
                            </button>
                            <br/>
                        </div>
                        <!-- profile picture -->
                        <div class="maintitle">
                            <p class="maintitle">
                                <img width="130" height="130" src="{{vm.profile.profile_image}}" />
                            </p>
                            <div>
                                <input id="profilePicture" class="disFile" type="file" upload-files />
                            </div>
                            <p style="font-size: 30px">
                                {{vm.profile.name}}
                            </p>
                        </div>

                        <div class="maintitle">
                            <h3 class="section-title">Our Aim</h3>
                            <p class="lead wow flipInX">
                                <textarea id="desTextArea" class="disTextArea" ng-model="vm.profile.description" rows="4" cols="60" maxlength="200" readonly="readonly"></textarea>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Last Activity -->
    <section id="lastActivity" class="parallax section">
        <div class="wrapsection">
            <div class="parallax-overlay lastActivityBg"></div>
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="maintitle">
                            <h3 class="section-title"><strong>CURRENT </strong> INFORMATION</h3>
                            <p class="lead">
                                <!-- Some text -->
                            </p>
                        </div>
                    </div>

                    <div class="col-md-4 col-sm-6">
                        <div class="service-box wow flipInY" data-wow-duration="1.5s" data-wow-delay="0.1s" ng-show="vm.profile.activityId">
                            <img style="width: 200px; height: 115px;" src="{{vm.profile.activityImage}}">
                            <h3>{{vm.profile.activityName}}</h3>
                            <h4>On {{vm.profile.date | date :'dd/MMM/yyyy'}}</h4>
                            <button type="button" class="btn btn-info btn-md"><a href="profile/{{vm.profile.name}}/activities">More Detail</a></button>&nbsp;&nbsp;&nbsp;&nbsp;
                            <button type="button" class="btn btn-info btn-md"><a href="profile/{{vm.profile.name}}/activity/{{vm.profile.activityId}}">More Pictures</a></button>
                        </div>
                        <div style="height: 294px;" class="service-box wow flipInY" data-wow-duration="1.5s" data-wow-delay="0.1s" ng-hide="vm.profile.activityId">
                            <br/><h3>Last Activity</h3><br/><br/>
                            <h4>There is no activity in this charity yet.</h4>
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-6">
                        <div class="service-box wow flipInY" data-wow-duration="1.5s" data-wow-delay="0.1s">
                            <br/>
                            <span class="glyphicon glyphicon-stats"></span>
                            <h3>Total Participants</h3>
                            <h1>{{vm.profile.volunteer}}</h1>
                            <h4>volunteers in our charity</h4>
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-6">
                        <div class="service-box wow flipInY" data-wow-duration="1.5s" data-wow-delay="0.4s">
                            <br/>
                            <span class="glyphicon glyphicon-gbp"></span>
                            <h3>Total Donated</h3>
                            <h1>{{vm.profile.donatedAmount}} &pound</h1>
                            <h4>was donated to our charity</h4>
                        </div>
                    </div>

                    <div class="col-md-12" ng-show="vm.profile.activityId">
                        <div class="maintitle">
                            <button type="button" class="btn btn-info btn-md"><a href="profile/{{vm.profile.name}}/activities">More Activities</a></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Financial -->
    <section id="financial" class="parallax section">
        <div class="wrapsection">
            <div class="parallax-overlay financialBg"></div>
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="maintitle">
                            <h3 class="section-title">FINANCE</h3>
                            <p class="lead">
                                Income : {{vm.profile.donatedAmount}} &pound
                            </p>
                        </div>
                    </div>

                    <div class="col-md-6 col-sm-6" ng-show="vm.profile.spendAmount != 0">
                        <div class="service-box-transbg wow flipInY" data-wow-duration="1.5s" data-wow-delay="0.1s">
                            <h3>Spending : {{vm.profile.spendAmount}} &pound</h3>
                            <div class="financialchart">
                                <canvas id="pie1" class="chart chart-pie"
                                        chart-data="vm.profile.spendingdata" chart-labels="vm.profile.labels" chart-options="options">
                                </canvas>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-sm-6" ng-show="vm.profile.spendAmount != 0">
                        <div class="service-box-transbg wow flipInY" data-wow-duration="1.5s" data-wow-delay="0.1s">
                            <h3>Activity Spending Detail :</h3>
                            <table>
                                <tr ng-repeat="spending in vm.profile.spendingdata">
                                    <td>
                                        <li>{{vm.profile.labels[$index]}} : {{ spending }} &pound</li>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <div class="col-md-12" ng-show="vm.profile.spendAmount == 0">
                        <div class="maintitle">
                            <div class="service-box-transbg wow flipInY" data-wow-duration="1.5s" data-wow-delay="0.1s">
                                <h3>This charity has not spent any money yet</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Detail -->
    <section id="contactDetail" class="parallax section">
        <div class="wrapsection">
            <div class="parallax-overlay contactDetailBg"></div>
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <!-- button console -->
                        <div class="buttonArea" ng-show="vm.isMatched">
                            <!-- edit -->
                            <button type="button" name="editButton" class="btn btn-default btn-sm" onclick="editClick();">
                                <span class="glyphicon glyphicon-pencil"></span>
                            </button>
                            <!-- save -->
                            <button type="button" name="saveButton" class="btn btn-default btn-sm" ng-click="vm.update()" onclick="saveClick()" disabled="true">
                                <span class="glyphicon glyphicon-floppy-disk"></span>
                            </button>
                            <!-- cancel -->
                            <button type="button" name="cancelButton" class="btn btn-default btn-sm" onclick="cancelClick()" disabled="true">
                                <span class="glyphicon glyphicon-remove"></span>
                            </button>
                            <br/>
                        </div>


                        <div class="maintitle">
                            <h3 class="section-title">Contact Detail</h3>
                        </div>

                        <div class="panel-body">
                            <form class="form-horizontal">
                                <!-- Address -->
                                <div class="form-group wow fadeIn animated" data-wow-delay="0.3" data-wow-duration="1.5s">
                                    <label class="col-sm-4 control-label">Address</label>
                                    <div class="col-sm-4">
                                        <input id="addressTextbox" type="text" class="form-control" ng-model="vm.profile.address" maxlength="50" readonly="readonly">
                                    </div>
                                </div>
                                <!-- City -->
                                <div class="form-group wow fadeIn animated" data-wow-delay="0.3" data-wow-duration="1.5s">
                                    <label class="col-sm-4 control-label">City</label>
                                    <div class="col-sm-4">
                                        <input id="cityTextbox" type="text" class="form-control" ng-model="vm.profile.city" maxlength="30" readonly="readonly">
                                    </div>
                                </div>
                                <!-- Country -->
                                <div class="form-group wow fadeIn animated" data-wow-delay="0.3" data-wow-duration="1.5s">
                                    <label class="col-sm-4 control-label">Country</label>
                                    <div class="col-sm-4">
                                        <input id="countryTextbox" type="text" class="form-control" ng-model="vm.profile.country" maxlength="30" readonly="readonly">
                                    </div>
                                </div>
                                <!-- Postcode -->
                                <div class="form-group wow fadeIn animated" data-wow-delay="0.3" data-wow-duration="1.5s">
                                    <label class="col-sm-4 control-label">Postcode</label>
                                    <div class="col-sm-4">
                                        <input id="postTextbox" type="text" class="form-control" ng-model="vm.profile.postcode" maxlength="20" readonly="readonly">
                                    </div>
                                </div>
                                <!-- Email -->
                                <div class="form-group wow fadeIn animated" data-wow-delay="0.3" data-wow-duration="1.5s">
                                    <label class="col-sm-4 control-label">Email</label>
                                    <div class="col-sm-4">
                                        <input id="emailTextbox" type="email" class="form-control" ng-model="vm.profile.email" maxlength="50" readonly="readonly">
                                    </div>
                                </div>
                                <!-- Phone Number -->
                                <div class="form-group wow fadeIn animated" data-wow-delay="0.3" data-wow-duration="1.5s">
                                    <label class="col-sm-4 control-label">Phone Number</label>
                                    <div class="col-sm-4">
                                        <input id="phoneTextbox" type="text" class="form-control" ng-model="vm.profile.phone_number" maxlength="15" readonly="readonly">
                                    </div>
                                </div>
                                <!-- Website -->
                                <div class="form-group wow fadeIn animated" data-wow-delay="0.3" data-wow-duration="1.5s">
                                    <label class="col-sm-4 control-label">Website</label>
                                    <div class="col-sm-4">
                                        <input id="webTextbox" type="text" class="form-control" ng-model="vm.profile.website" maxlength="100" readonly="readonly">
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
<script>
    $(document).ready(function(){
        var lines = 4;
        var maxLength = 60;
        $('#desTextArea').keydown(function(e) {
            newLines = $(this).val().split("\n");
            cntNewLines = newLines.length;
            if (e.keyCode == 13 && cntNewLines >= lines) {
                return false;
            }
        });

        $('[data-toggle="tooltip"]').tooltip();

    });

    window.fbAsyncInit = function() {
        FB.init({
            appId      : '1828642534025419',
            xfbml      : true,
            version    : 'v2.8'
        });
    };

    (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.8&appId=1828642534025419";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));

    // init variables
    var initDescription;
    var initAddress;
    var initCity;
    var initCountry;
    var initPost;
    var initEmail;
    var initPhone;
    var initWeb;
    // Description Section
    var desTextArea = document.getElementById("desTextArea");
    var profilePicture = document.getElementById("profilePicture");
    // Contact Section
    var address = document.getElementById("addressTextbox");
    var city = document.getElementById("cityTextbox");
    var country = document.getElementById("countryTextbox");
    var post = document.getElementById("postTextbox");
    var email = document.getElementById("emailTextbox");
    var phone = document.getElementById("phoneTextbox");
    var web = document.getElementById("webTextbox");
    // Button
    var editButton = document.getElementsByName("editButton");
    var saveButton = document.getElementsByName("saveButton");
    var cancelButton = document.getElementsByName("cancelButton");

    function editClick() {
        // Save init value
        initValue();
        // Description Section
        desTextArea.className = "enTextArea";
        desTextArea.readOnly = false;
        profilePicture.className = "enFile";
        // Contact Section
        address.readOnly = false;
        city.readOnly = false;
        country.readOnly = false;
        post.readOnly = false;
        email.readOnly = false;
        phone.readOnly = false;
        web.readOnly = false;
        // Button
        disabledButton();
    }

    function saveClick() {
        disabledEdit();
        disabledButton();
    }

    function cancelClick(){
        setInit();
        disabledEdit();
        disabledButton();
    }

    function initValue() {
        initDescription = desTextArea.value;
        initAddress = address.value;
        initCity = city.value;
        initCountry = country.value;
        initPost = post.value;
        initEmail = email.value;
        initPhone = phone.value;
        initWeb = web.value;
    }

    function setInit() {
        desTextArea.value = initDescription;
        address.value = initAddress;
        city.value = initCity;
        country.value = initCountry;
        post.value = initPost;
        email.value = initEmail;
        phone.value = initPhone;
        web.value = initWeb;
    }

    function disabledEdit() {
        // Description Section
        desTextArea.className = "disTextArea";
        desTextArea.readOnly = true;
        profilePicture.className = "disFile";
        // Contact Section
        address.readOnly = true;
        city.readOnly = true;
        country.readOnly = true;
        post.readOnly = true;
        email.readOnly = true;
        phone.readOnly = true;
        web.readOnly = true;
    }

    function disabledButton() {
        for (var i = 0; i < editButton.length; i++) {
            editButton[i].disabled = !editButton[i].disabled;
            saveButton[i].disabled = !saveButton[i].disabled;
            cancelButton[i].disabled = !cancelButton[i].disabled;
        }
    }

    function goToByScroll(id){
        // Remove "Link" from the ID
        id = id.replace("Link", "");
        // Scroll
        $('html,body').animate({ scrollTop: $("#"+id).offset().top - 20}, 'slow');
    }

    $("#descriptionLink,#lastActivityLink,#financialLink,#contactDetailLink").click(function(e) {
        // Prevent a page reload when a link is pressed
        e.preventDefault();
        // Call the scroll function
        goToByScroll($(this).attr("id"));
    });

</script>

<script src="/static/charity/js/app/components/profiles/js/common.js"></script>
<script src="/static/charity/js/app/components/profiles/js/scripts.js"></script>
<script src="/static/charity/js/app/components/profiles/js/star.js"></script>

</body>
</html>